{
  "animateLoading": true,
  "borderRadius": "0.375rem",
  "bottomRow": 67,
  "boxShadow": "none",
  "buttonColor": "#4b5c91",
  "buttonVariant": "PRIMARY",
  "disabledWhenInvalid": false,
  "displayName": "Button",
  "dynamicBindingPathList": [],
  "dynamicPropertyPathList": [
    {
      "key": "onClick"
    }
  ],
  "dynamicTriggerPathList": [
    {
      "key": "onClick"
    }
  ],
  "hideCard": false,
  "iconSVG": "/static/media/icon.cca026338f1c8eb6df8ba03d084c2fca.svg",
  "isDefaultClickDisabled": true,
  "isDeprecated": false,
  "isDisabled": false,
  "isLoading": false,
  "isVisible": true,
  "key": "39z78os9vu",
  "leftColumn": 50,
  "onClick": "{{\n  console.log('Add case button clicked');\n  storeValue('isSubmitting', true);\n  \n  // Simple inline validation (no external JS object calls)\n  const caseNum = String(Inp_Case_Num.text || '').trim();\n  const division = Sel_Division.selectedOptionValue;\n  const category = Sel_Corr_Category.selectedOptionValue;\n  const origin = Sel_Case_Origin.selectedOptionValue;\n  const leadDate = Inp_Lead_Date.selectedDate;\n  const numDate = Inp_Receive_Date.selectedDate;\n  \n  // Validation 1: Case number\n  if (!caseNum) {\n    showAlert('กรุณากรอกหมายเลขคดี', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 2: Division\n  if (!division) {\n    showAlert('กรุณาเลือกเขตพื้นที่รับผิดชอบ', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 3: Category\n  if (!category) {\n    showAlert('กรุณาเลือกประเภทการทุจริต', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 4: Origin\n  if (!origin) {\n    showAlert('กรุณาเลือกแหล่งที่มาของคดี', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 5: Lead date\n  if (!leadDate) {\n    showAlert('กรุณาเลือกวันที่ได้รับเรื่อง', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 6: Number date\n  if (!numDate) {\n    showAlert('กรุณาเลือกวันที่ออกหมายเลขคดี', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 7: Numeric case number\n  if (!/^\\d+$/.test(caseNum)) {\n    showAlert('หมายเลขคดีต้องเป็นตัวเลขเท่านั้น', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  // Validation 8: Spinoff check\n  if (Boolean_Spinoff.isChecked && !Sel_Spinoff.selectedOptionValue) {\n    showAlert('กรุณาเลือกคดีต้นฉบับ (สำหรับคดี Spinoff)', 'error');\n    storeValue('isSubmitting', false);\n    return; // STOP HERE - NO RESET\n  }\n  \n  console.log('All basic validations passed, checking duplicate...');\n  \n  // Check for duplicate case number\n  CheckDuplicateCaseNumber.run()\n    .then(() => {\n      console.log('Duplicate check completed');\n      \n      // Check if duplicate exists\n      if (CheckDuplicateCaseNumber.data && CheckDuplicateCaseNumber.data.length > 0) {\n        const existingCase = CheckDuplicateCaseNumber.data[0];\n        const caseYear = String(Inp_Case_Year.text || (moment().year() + 543));\n        const fullCaseNumber = `${caseNum}/${caseYear}`;\n        \n        showAlert(`คดีหมายเลข ${fullCaseNumber} มีอยู่แล้วในระบบ (ID: ${existingCase.case_id})`, 'error');\n        storeValue('isSubmitting', false);\n        return; // STOP HERE - NO RESET\n      }\n      \n      console.log('No duplicate found, proceeding with case creation...');\n      \n      // ALL VALIDATIONS PASSED - Now add the case\n      I_Cases.run()\n        .then(() => {\n          const caseYear = String(Inp_Case_Year.text || (moment().year() + 543));\n          const fullCaseNumber = `${caseNum}/${caseYear}`;\n          \n          console.log('Case added successfully:', fullCaseNumber);\n          showAlert(`เพิ่มคดี ${fullCaseNumber} สำเร็จ`, 'success');\n          \n          // SUCCESS - NOW AND ONLY NOW we reset the form\n          console.log('Resetting form after successful submission...');\n          resetWidget('Inp_Case_Num');\n          resetWidget('Inp_Case_Year');\n          resetWidget('Sel_Division');\n          resetWidget('Sel_Corr_Category');\n          resetWidget('Sel_Case_Origin');\n          resetWidget('Inp_Lead_Date');\n          resetWidget('Inp_Num_Date');\n          resetWidget('Inp_Case_Num_Date');\n          resetWidget('Inp_Book_Num');\n          resetWidget('Inp_Book_Date');\n          resetWidget('Inp_Receive_Num');\n          resetWidget('Inp_Nacc_Num');\n          resetWidget('Inp_Damage_Value');\n          resetWidget('Boolean_Spinoff');\n          resetWidget('Sel_Spinoff');\n          \n          storeValue('isSubmitting', false);\n        })\n        .catch((error) => {\n          console.error('Database insertion failed:', error);\n          showAlert('เกิดข้อผิดพลาดในการเพิ่มคดี: ' + error.message, 'error');\n          storeValue('isSubmitting', false);\n          // NO RESET ON DATABASE ERROR - User keeps their data\n        });\n    })\n    .catch((error) => {\n      console.error('Duplicate check failed:', error);\n      showAlert('เกิดข้อผิดพลาดในการตรวจสอบหมายเลขคดี', 'error');\n      storeValue('isSubmitting', false);\n      // NO RESET ON CHECK ERROR - User keeps their data\n    });\n}}",
  "parentId": "2w47hpxjfw",
  "placement": "CENTER",
  "recaptchaType": "V3",
  "renderMode": "CANVAS",
  "resetFormOnClick": false,
  "rightColumn": 63,
  "searchTags": [
    "click",
    "submit"
  ],
  "text": "เพิ่มคดี",
  "topRow": 63,
  "type": "BUTTON_WIDGET",
  "version": 1,
  "widgetId": "4qgyc4yv92",
  "widgetName": "Btn_Add_Case"
}