{
  "gitSyncId": "686e46c8f052af62894e37fb_28984d11-718c-4fce-bd2c-171202301a3e",
  "id": "Page1_R_WARNING",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT \n  c.case_id,\n  c.case_number,\n  c.prelim_deadline,\n  c.inves_deadline,\n  c.prelim_status,\n  c.inves_status,\n  c.prelim_result,\n  c.inves_result,\n  s.prelim_warning,\n  s.invest_warning,\n  c.responsible_district,\n  c.prelim_investigator,\n  c.inves_investigator,\n  -- Add computed fields to identify warning types\n  CASE \n    WHEN c.prelim_result != 2 AND c.prelim_status != 8 AND c.prelim_deadline IS NOT NULL \n         AND c.prelim_deadline <= CURRENT_DATE + s.prelim_warning * INTERVAL '1 day'\n         AND c.prelim_deadline >= CURRENT_DATE \n    THEN 'warning_prelim'\n    \n    WHEN c.prelim_result = 2 AND c.inves_status != 7 AND c.inves_deadline IS NOT NULL\n         AND c.inves_deadline <= CURRENT_DATE + s.invest_warning * INTERVAL '1 day'\n         AND c.inves_deadline >= CURRENT_DATE\n    THEN 'warning_inves'\n    \n    WHEN c.prelim_result != 2 AND c.prelim_status != 8 AND c.prelim_deadline IS NOT NULL\n         AND c.prelim_deadline < CURRENT_DATE\n    THEN 'late_prelim'\n    \n    WHEN c.prelim_result = 2 AND c.inves_status != 7 AND c.inves_deadline IS NOT NULL\n         AND c.inves_deadline < CURRENT_DATE\n    THEN 'late_inves'\n  END as warning_type\nFROM public.case c\nJOIN public.settings s ON s.id = 1\nWHERE (\n  -- Warning prelim conditions\n  (c.prelim_result != 2 AND c.prelim_status != 8 AND c.prelim_deadline IS NOT NULL \n   AND c.prelim_deadline <= CURRENT_DATE + s.prelim_warning * INTERVAL '1 day'\n   AND c.prelim_deadline >= CURRENT_DATE)\n  OR\n  -- Warning inves conditions  \n  (c.prelim_result = 2 AND c.inves_status != 7 AND c.inves_deadline IS NOT NULL\n   AND c.inves_deadline <= CURRENT_DATE + s.invest_warning * INTERVAL '1 day'\n   AND c.inves_deadline >= CURRENT_DATE)\n  OR\n  -- Late prelim conditions\n  (c.prelim_result != 2 AND c.prelim_status != 8 AND c.prelim_deadline IS NOT NULL\n   AND c.prelim_deadline < CURRENT_DATE)\n  OR\n  -- Late inves conditions\n  (c.prelim_result = 2 AND c.inves_status != 7 AND c.inves_deadline IS NOT NULL\n   AND c.inves_deadline < CURRENT_DATE)\n) AND (\n  COALESCE({{ Slc_Division.selectedOptionValue }}, 0) = 0\n  OR (c.responsible_district != '' AND CAST(c.responsible_district AS INTEGER) = {{ Slc_Division.selectedOptionValue }})\n)\nORDER BY c.year, c.case_number;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "mainDB",
      "isAutoGenerated": false,
      "name": "mainDB",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "R_WARNING",
    "pageId": "Page1",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": true
  }
}